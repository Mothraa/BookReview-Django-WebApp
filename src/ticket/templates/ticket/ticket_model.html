<div class="bg-white p-6 rounded-lg shadow-md mb-4">
    {% if post.user == request.user %}
        <p>Vous avez publié un ticket</p>
    {% else %}
        <p>Ticket publié par {{ post.user.nickname }}</p>
    {% endif %}
    <p class="text-right">{{ post.time_created|date:"H:i, j F Y" }}</p>
    <h2 class="font-semibold">{{ post.title }}</h2>

    <p class="mt-2">{{ post.description }}</p>
    {% comment %} TODO : ajouter un bouton voir plus si la description est longue {% endcomment %}
    {% if post.image %}
        <img class="mt-4" src="{{ post.image.url }}" alt="Image du ticket">
    {% endif %}
    
    {% comment %} <p>Utilisateur :{{ ticket.user.nickname }}</p> {% endcomment %}
    {% if post.user == request.user %}
        <div class="flex justify-end">
            <a href="{% url 'edit_ticket' ticket_id=post.id %}" class="btn bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800 mt-4 ml-4">Modifier</a>
            {% comment %} {% include 'ticket/delete_ticket.html' %} {% endcomment %}
            <div id="deleteModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
                <div class="bg-white p-6 rounded-lg shadow-md w-1/3 min-w-[300px]">
                    <h2 class="text-xl font-bold mb-4">Confirmez la suppression</h2>
                    <form id="deleteForm" method="post" action="{% url 'delete_ticket' ticket_id=post.id %}" class="w-full">
                        {% csrf_token %}
                        <input type="hidden" name="delete_ticket" value="true">
                        <div class="flex justify-end mt-4 w-full">
                            <button type="submit" class="bg-red-700 text-white py-2 px-4 rounded hover:bg-red-800 mr-2">Supprimer</button>
                            <button type="button" onclick="closeModal()" class="btn btn-secondary bg-gray-700 text-white py-2 px-4 rounded hover:bg-gray-800 mr-2">Annuler</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <button onclick="openModal('{{ post.id }}')" class="btn bg-green-700 text-white py-2 px-4 rounded hover:bg-green-800 mt-4 ml-4">Supprimer</button>
        </div>
    {% endif %}


</div>